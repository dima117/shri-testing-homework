# Логичеcкие блоки приложения

* ##История коммитов
* ##Файловая система
* ##Содержимое файла
* ##Навигация

**main**

* app.js:
    Конфиги работы сервера, обработчики определенных get-запросов. Обработка ошибочных запросов.

**controllers/:**

* indexController.js:
    Получает запрос, в результате которого вызывается функция ``gitHistory`` с параметрами паггинации (1, 20), в резудьтате чего на странице отображается 20 
    записей-коммитов. В случае ошибки передает ее в ``next()``.
* filesController.js
    При запросе вызывает функцию ``gitFileTree`` с построением пути к файлу
* contentController.js
    При запросе вызывает функции ``gitFileTree`` и ``gitFileContent`` для отображения либо контента файла либо пути

**utils/:**

* navigation.js
    * ф-я ``buildFolderUrl`` формирует URL путь к папке
    * ф-я ``buildFileUrl`` формирует URL путь к файлу
    * ф-я ``buildBreadcrumbs`` формирует хлебные хрошки. В качестве аргументов передается хэш сумма файлов текущей папки и текущий путь, после чего выстраивает иерархию. В случае отсутвтвия хэша возвращает обхект со строкой 'HISTORY'
* git.js
    * ф-я ``executeGit``, 1-м аргументом передается название команды (во всех вызовах исп. *git*), 2-м аргументом передается массив параметров для команды. После вызова выполняет команду ч-з модуль ``child_process``. 
    * ф-я ``parseHistoryItem``, ``parseFileTreeItem`` парсит строку посредсвом сплита, возвращает объект
    * ф-я ``gitHistory`` выполняет команду *git log* для получение списка коммитов, после чего возвращает распарсенный ч-з ``parseHistoryItem`` объект с заданными свойствами
    * ф-я ``gitFileTree`` выполняет команду *git ls-tree* и возвращает распарсенную строку в виде объекта со свойствами *{type, hash, path}*
    * ф-я ``gitFileContent`` выполняет команду *git show _hash* для получения содержимого файла