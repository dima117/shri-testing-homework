# Домашнее задание: автотесты
##Запуск
```
npm i
npm start
```
Запуск модульных тестов
```
npm run unit-tests
```
Запуск интеграционных тестов
```
npm run start-selenium
npm run integration-tests
```
##Модульные тесты
* Перед созданимем модульных тестов был произведен рефакторинг файлов git.js и navigation.js — функции были заменены на методы класса, в экспорт передается экземпляр класса и класс для тестов.
* В качестве логических блоков для модульных тестов были взяты:
  * Обработка приходящих данных
     * Получение истории коммитов — метод возвращает массив
     * Получение списка файлов коммита — метод принимает хеш коммита и путь, возвращает массив файлов
     * Преобразование строки в объект данных — метод принимает строку из истории коммитов, возвращает объект
  * Формирование url навигации.
     * Формирование url для файлов коммита — метод принимает хеш, возвращает url для текущего коммита
     * Формирование url для директорий и файлов коммита — метод принимает хеш и директории коммита, обрабатывает исключения и возвращает url 
     * Формирование хлебных крошек — метод принимает хеш и путь, обрабатывает исключения, возвращает массив хлебных крошек

Тесты:
* tests/utils/git.test.js
* tests/utils/navigations.test.js

 Для метода executeGit была написана заглушка (stub), т.к. он ссылается на внешнюю зависимость execFile. Метод gitFileContent не был протестирован т.к. он обращается на прямую к методу executeGit без каких-либо преобразований данных.
 
 Для анализа покрытия тестами был использован istanbul
 
## Интеграционные тесты
* hermione/breadcrumbs.hermione.js
* hermione/layout.hermione.js
* hermione/screenshot.hermione.js
* hermione/url.hermione.js

Интеграционные тесты осуществляют тестирование:
* Вывод основных блоков (layout.hermione.js)
* Правильное отображение выводимых блоков (screenshot.hermione.js)
* Корректная работа хлебных крошек (breadcrumbs.hermione.js)
* Формирование и работа перехода по страницам (url.hermione.js)

Были написано 2 кастомные команды для Гермионы:
* assertExists — проверяет наличие селектора на странице
* assertUrl — проверяет соответствие текущего url с заданным

В .hermione.conf.js закомментировал gridUrl: 'http://0.0.0.0:4444/wb/hub', с ним почему-то сыпались ошибки 

---
Вам дано приложение на JavaScript и нужно написать для него автотесты: интеграционные тесты на интерфейс и модульные тесты на серверную часть.

## Предметная область

Приложение отображает в браузере информацию из git репозитория: список коммитов, файловую систему для выбранного коммита, содержимое выбранного файла (поддерживаются только текстовые форматы). Для удобства навигации на каджой странице отображаются "хлебные крошки".

## Как запустить

```sh
git clone git@github.com:dima117/shri-testing-homework.git
cd shri-testing-homework.git
npm i
npm start
```

## Интеграционные тесты

Сценарии для интеграционных тестов

- на всех страницах (история коммитов, просмотр файловой системы, просмотр содержимого файла) правильно отображается их содержимое;
- правильно работают переходы по страницам
  - из списка коммитов на список файлов
  - из списка файлов во вложенную папку
  - из списка файлов на страницу отдельного файла
  - переходы по хлебным крошкам

## Модульные тесты

- нужно добавить в README список логических блоков системы и их сценариев
- для каждого блока нужно написать модульные тесты
- если необходимо, выполните рефакторинг, чтобы реорганизовать логические блоки или добавить точки расширения
