# Домашнее задание: автотесты

Вам дано приложение на JavaScript и нужно написать для него автотесты: интеграционные тесты на интерфейс и модульные тесты на серверную часть.

## Предметная область

Приложение отображает в браузере информацию из git репозитория: список коммитов, файловую систему для выбранного коммита, содержимое выбранного файла (поддерживаются только текстовые форматы). Для удобства навигации на каджой странице отображаются "хлебные крошки".

## Как запустить

#### Установка
```sh
git clone https://github.com/KingManiya/shri-testing-homework.git
cd shri-testing-homework
npm i
```

#### Сервер
```sh
npm start
```
Приложение будет доступно по адресу http://localhost:3000

#### Модульные тесты:
```sh
npm test
```

#### Интеграционные тесты:
Если не установлен selenium
```sh
npm install selenium-standalone --global
selenium-standalone install
```

Перед запуском необходимо остановить **npm start**, что бы запустить сервер с подменой данных.
```sh
npm run start-mock
npm run selenium
npm run hermione
```

## Стуктура тестов

tests - корневая папка
- hermione - интеграционные тесты
    - report - папка с генерируемым отчётом плагина html-reporter/hermione
    - screens - эталонные скриншоты для тестов
    - breadcrumbs.hermione - тесты на переходы по хлебным крошкам
    - content.hermione - тесты на правильное отображение содержимого и переходы по ссылкам
- unit - модульные тесты
    - data - эталоннные и данные для заглушок
    - utils - каталог аналог корневому в проекте
        - git.test.js - тестирование git функций
        - navigation.test.js - тестирование функций навигации (построения путей и хлебных крошек)

## Интеграционные тесты

Сценарии для интеграционных тестов

- ✓ на всех страницах (история коммитов, просмотр файловой системы, просмотр содержимого файла) правильно отображается их содержимое;
- ✓ правильно работают переходы по страницам
  - ✓ из списка коммитов на список файлов
  - ✓ из списка файлов во вложенную папку
  - ✓ из списка файлов на страницу отдельного файла
  - ✓ переходы по хлебным крошкам

_Для запуска hermione gui можно использовать:_
```sh
npm run hermione-g
```

_Для просмотра отчета тестирования нужно смотреть файл: tests/hermione/report/index.html_

_Тесты хрома падают на мониторах с разным DPI.
Тесты проводились на мониторе 21.5`` в разрешении 1920x1080_

## Модульные тесты

- ✓ нужно добавить в README список логических блоков системы и их сценариев
- ✓ для каждого блока нужно написать модульные тесты
- ✓ если необходимо, выполните рефакторинг, чтобы реорганизовать логические блоки или добавить точки расширения

### Рефакторинг

- Из файлового контроллера вынесена функция в утилиты навигации. Это позволило писать тесты на одну функцию buildObjectUrl, что бы проверять работу связанных buildFolderUrl, buildFileUrl.
- В утилитах гита добавлена функция для переопределения execFile. Данный способ позволяет тестировать модуль git.js без рефакторинга проекта.

### Блоки и сценарии

- Навигация
    - Хлебные крошки
        - Путь во время просмотра истории коммитов
        - Путь во время просмотра файлов коммита
        - Путь во время просмотра папки
        - Путь во время просмотра файла
    - Ссылки на переход
        - Переход к просмотру файлов со страницы истории
        - Переход к просмотру содержимого файла
        - Переход к просмотру папки
- Данные
    - Получение истории коммитов
    - Получение списка файлов
    - Получение содержимого файла